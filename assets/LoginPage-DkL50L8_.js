import{a as b,b as f,j as e,I as n,c as j,L as N,d as y,A as L}from"./index-BHebYxy1.js";import{z as t,u as v,E as m,B as E,s as S}from"./ErrorTextForm-CdqvKzo6.js";const A=t.object({email:t.string().nonempty("Email tidak boleh kosong").email("Email tidak valid"),password:t.string().nonempty("Password tidak boleh kosong")}),T=()=>{const{setAccessToken:c,setUser:x,loading:h,setLoading:r}=b(),{register:o,handleSubmit:g,formState:{errors:a,isSubmitting:w},setError:i}=v({resolver:S(A)}),p=f(),u=async k=>{var d,l;r(!0);try{const s=await y.post("/login",{...k});c(s.data.data.accessToken),x(s.data.data.user),p("/dashboard",{replace:!0})}catch(s){s instanceof L&&(console.error("Login failed: ",s),i("email",{message:(d=s.response)==null?void 0:d.data.message}),i("password",{message:(l=s.response)==null?void 0:l.data.message}))}finally{r(!1)}};return e.jsx("main",{className:"bg-tradewind-50 dark:bg-woodsmoke-950 flex min-h-screen w-full items-center justify-center px-4",children:e.jsxs("div",{className:"dark:bg-woodsmoke-900 dark:border-woodsmoke-800 mx-auto flex w-full max-w-md flex-col rounded-md bg-white p-6 shadow-md dark:border-1 dark:shadow-none",children:[e.jsx("h1",{className:"text-chathams-blue text-center text-3xl font-semibold dark:text-white",children:"Login"}),e.jsx("hr",{className:"bg-tradewind dark:bg-tradewind my-6 h-0.5 rounded-full border-none"}),e.jsxs("form",{method:"POST",onSubmit:g(u),className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",className:"text-chathams-blue text-lg dark:text-white",children:"Email"}),e.jsx(n,{id:"email",type:"email",errors:a.email,...o("email")}),a.email&&e.jsx(m,{children:a.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-chathams-blue text-lg dark:text-white",children:"Password"}),e.jsx(n,{id:"password",type:"password",errors:a.password,...o("password")}),a.password&&e.jsx(m,{children:a.password.message})]}),e.jsx(E,{type:"submit",disabled:h,children:w?e.jsx(j,{color:"white"}):e.jsx("span",{children:"Login"})})]}),e.jsx(N,{to:"/register",className:"text-woodsmoke-300 dark:text-woodsmoke-500 hover:text-woodsmoke-400 mt-6 text-center text-sm",children:"Belum memiliki akun? Registrasi disini"})]})})};export{T as default};
